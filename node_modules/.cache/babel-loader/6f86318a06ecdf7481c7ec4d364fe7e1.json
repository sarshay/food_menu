{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/renderer/canvas/VectorImageLayer\n */\n\n\nimport CanvasImageLayerRenderer from './ImageLayer.js';\nimport CanvasVectorLayerRenderer from './VectorLayer.js';\nimport EventType from '../../events/EventType.js';\nimport ImageCanvas from '../../ImageCanvas.js';\nimport ImageState from '../../ImageState.js';\nimport RBush from 'rbush';\nimport ViewHint from '../../ViewHint.js';\nimport { apply, compose, create } from '../../transform.js';\nimport { assign } from '../../obj.js';\nimport { getHeight, getWidth, isEmpty, scaleFromCenter } from '../../extent.js';\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\n\nvar CanvasVectorImageLayerRenderer =\n/** @class */\nfunction (_super) {\n  __extends(CanvasVectorImageLayerRenderer, _super);\n  /**\n   * @param {import(\"../../layer/VectorImage.js\").default} layer Vector image layer.\n   */\n\n\n  function CanvasVectorImageLayerRenderer(layer) {\n    var _this = _super.call(this, layer) || this;\n    /**\n     * @private\n     * @type {import(\"./VectorLayer.js\").default}\n     */\n\n\n    _this.vectorRenderer_ = new CanvasVectorLayerRenderer(layer);\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.layerImageRatio_ = layer.getImageRatio();\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n\n    _this.coordinateToVectorPixelTransform_ = create();\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n\n    _this.renderedPixelToCoordinateTransform_ = null;\n    return _this;\n  }\n  /**\n   * Clean up.\n   */\n\n\n  CanvasVectorImageLayerRenderer.prototype.disposeInternal = function () {\n    this.vectorRenderer_.dispose();\n\n    _super.prototype.disposeInternal.call(this);\n  };\n  /**\n   * Asynchronous layer level hit detection.\n   * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../../Feature\").default>>} Promise that resolves with an array of features.\n   */\n\n\n  CanvasVectorImageLayerRenderer.prototype.getFeatures = function (pixel) {\n    if (!this.vectorRenderer_) {\n      return new Promise(function (resolve) {\n        return resolve([]);\n      });\n    }\n\n    var vectorPixel = apply(this.coordinateToVectorPixelTransform_, apply(this.renderedPixelToCoordinateTransform_, pixel.slice()));\n    return this.vectorRenderer_.getFeatures(vectorPixel);\n  };\n  /**\n   * Perform action necessary to get the layer rendered after new fonts have loaded\n   */\n\n\n  CanvasVectorImageLayerRenderer.prototype.handleFontsChanged = function () {\n    this.vectorRenderer_.handleFontsChanged();\n  };\n  /**\n   * Determine whether render should be called.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n\n\n  CanvasVectorImageLayerRenderer.prototype.prepareFrame = function (frameState) {\n    var pixelRatio = frameState.pixelRatio;\n    var viewState = frameState.viewState;\n    var viewResolution = viewState.resolution;\n    var hints = frameState.viewHints;\n    var vectorRenderer = this.vectorRenderer_;\n    var renderedExtent = frameState.extent;\n\n    if (this.layerImageRatio_ !== 1) {\n      renderedExtent = renderedExtent.slice(0);\n      scaleFromCenter(renderedExtent, this.layerImageRatio_);\n    }\n\n    var width = getWidth(renderedExtent) / viewResolution;\n    var height = getHeight(renderedExtent) / viewResolution;\n\n    if (!hints[ViewHint.ANIMATING] && !hints[ViewHint.INTERACTING] && !isEmpty(renderedExtent)) {\n      vectorRenderer.useContainer(null, null, 1);\n      var context = vectorRenderer.context;\n      var imageFrameState_1 =\n      /** @type {import(\"../../PluggableMap.js\").FrameState} */\n      assign({}, frameState, {\n        declutterTree: new RBush(9),\n        extent: renderedExtent,\n        size: [width, height],\n        viewState:\n        /** @type {import(\"../../View.js\").State} */\n        assign({}, frameState.viewState, {\n          rotation: 0\n        })\n      });\n      var emptyImage_1 = true;\n      var image_1 = new ImageCanvas(renderedExtent, viewResolution, pixelRatio, context.canvas, function (callback) {\n        if (vectorRenderer.prepareFrame(imageFrameState_1) && vectorRenderer.replayGroupChanged) {\n          vectorRenderer.clipping = false;\n\n          if (vectorRenderer.renderFrame(imageFrameState_1, null)) {\n            vectorRenderer.renderDeclutter(imageFrameState_1);\n            emptyImage_1 = false;\n          }\n\n          callback();\n        }\n      });\n      image_1.addEventListener(EventType.CHANGE, function () {\n        if (image_1.getState() !== ImageState.LOADED) {\n          return;\n        }\n\n        this.image_ = emptyImage_1 ? null : image_1;\n        var imageResolution = image_1.getResolution();\n        var imagePixelRatio = image_1.getPixelRatio();\n        var renderedResolution = imageResolution * pixelRatio / imagePixelRatio;\n        this.renderedResolution = renderedResolution;\n        this.coordinateToVectorPixelTransform_ = compose(this.coordinateToVectorPixelTransform_, width / 2, height / 2, 1 / renderedResolution, -1 / renderedResolution, 0, -viewState.center[0], -viewState.center[1]);\n      }.bind(this));\n      image_1.load();\n    }\n\n    if (this.image_) {\n      this.renderedPixelToCoordinateTransform_ = frameState.pixelToCoordinateTransform.slice();\n    }\n\n    return !!this.image_;\n  };\n  /**\n   */\n\n\n  CanvasVectorImageLayerRenderer.prototype.preRender = function () {};\n  /**\n   */\n\n\n  CanvasVectorImageLayerRenderer.prototype.postRender = function () {};\n  /**\n   */\n\n\n  CanvasVectorImageLayerRenderer.prototype.renderDeclutter = function () {};\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {import(\"../vector.js\").FeatureCallback<T>} callback Feature callback.\n   * @param {Array<import(\"../Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n\n\n  CanvasVectorImageLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, matches) {\n    if (this.vectorRenderer_) {\n      return this.vectorRenderer_.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, matches);\n    } else {\n      return _super.prototype.forEachFeatureAtCoordinate.call(this, coordinate, frameState, hitTolerance, callback, matches);\n    }\n  };\n\n  return CanvasVectorImageLayerRenderer;\n}(CanvasImageLayerRenderer);\n\nexport default CanvasVectorImageLayerRenderer;","map":{"version":3,"sources":["../../src/renderer/canvas/VectorImageLayer.js"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/VectorImageLayer\n */\nimport CanvasImageLayerRenderer from './ImageLayer.js';\nimport CanvasVectorLayerRenderer from './VectorLayer.js';\nimport EventType from '../../events/EventType.js';\nimport ImageCanvas from '../../ImageCanvas.js';\nimport ImageState from '../../ImageState.js';\nimport RBush from 'rbush';\nimport ViewHint from '../../ViewHint.js';\nimport { apply, compose, create } from '../../transform.js';\nimport { assign } from '../../obj.js';\nimport { getHeight, getWidth, isEmpty, scaleFromCenter } from '../../extent.js';\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\nvar CanvasVectorImageLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasVectorImageLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/VectorImage.js\").default} layer Vector image layer.\n     */\n    function CanvasVectorImageLayerRenderer(layer) {\n        var _this = _super.call(this, layer) || this;\n        /**\n         * @private\n         * @type {import(\"./VectorLayer.js\").default}\n         */\n        _this.vectorRenderer_ = new CanvasVectorLayerRenderer(layer);\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.layerImageRatio_ = layer.getImageRatio();\n        /**\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.coordinateToVectorPixelTransform_ = create();\n        /**\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.renderedPixelToCoordinateTransform_ = null;\n        return _this;\n    }\n    /**\n     * Clean up.\n     */\n    CanvasVectorImageLayerRenderer.prototype.disposeInternal = function () {\n        this.vectorRenderer_.dispose();\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Asynchronous layer level hit detection.\n     * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../../Feature\").default>>} Promise that resolves with an array of features.\n     */\n    CanvasVectorImageLayerRenderer.prototype.getFeatures = function (pixel) {\n        if (!this.vectorRenderer_) {\n            return new Promise(function (resolve) { return resolve([]); });\n        }\n        var vectorPixel = apply(this.coordinateToVectorPixelTransform_, apply(this.renderedPixelToCoordinateTransform_, pixel.slice()));\n        return this.vectorRenderer_.getFeatures(vectorPixel);\n    };\n    /**\n     * Perform action necessary to get the layer rendered after new fonts have loaded\n     */\n    CanvasVectorImageLayerRenderer.prototype.handleFontsChanged = function () {\n        this.vectorRenderer_.handleFontsChanged();\n    };\n    /**\n     * Determine whether render should be called.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    CanvasVectorImageLayerRenderer.prototype.prepareFrame = function (frameState) {\n        var pixelRatio = frameState.pixelRatio;\n        var viewState = frameState.viewState;\n        var viewResolution = viewState.resolution;\n        var hints = frameState.viewHints;\n        var vectorRenderer = this.vectorRenderer_;\n        var renderedExtent = frameState.extent;\n        if (this.layerImageRatio_ !== 1) {\n            renderedExtent = renderedExtent.slice(0);\n            scaleFromCenter(renderedExtent, this.layerImageRatio_);\n        }\n        var width = getWidth(renderedExtent) / viewResolution;\n        var height = getHeight(renderedExtent) / viewResolution;\n        if (!hints[ViewHint.ANIMATING] &&\n            !hints[ViewHint.INTERACTING] &&\n            !isEmpty(renderedExtent)) {\n            vectorRenderer.useContainer(null, null, 1);\n            var context = vectorRenderer.context;\n            var imageFrameState_1 = \n            /** @type {import(\"../../PluggableMap.js\").FrameState} */ (assign({}, frameState, {\n                declutterTree: new RBush(9),\n                extent: renderedExtent,\n                size: [width, height],\n                viewState: /** @type {import(\"../../View.js\").State} */ (assign({}, frameState.viewState, {\n                    rotation: 0,\n                })),\n            }));\n            var emptyImage_1 = true;\n            var image_1 = new ImageCanvas(renderedExtent, viewResolution, pixelRatio, context.canvas, function (callback) {\n                if (vectorRenderer.prepareFrame(imageFrameState_1) &&\n                    vectorRenderer.replayGroupChanged) {\n                    vectorRenderer.clipping = false;\n                    if (vectorRenderer.renderFrame(imageFrameState_1, null)) {\n                        vectorRenderer.renderDeclutter(imageFrameState_1);\n                        emptyImage_1 = false;\n                    }\n                    callback();\n                }\n            });\n            image_1.addEventListener(EventType.CHANGE, function () {\n                if (image_1.getState() !== ImageState.LOADED) {\n                    return;\n                }\n                this.image_ = emptyImage_1 ? null : image_1;\n                var imageResolution = image_1.getResolution();\n                var imagePixelRatio = image_1.getPixelRatio();\n                var renderedResolution = (imageResolution * pixelRatio) / imagePixelRatio;\n                this.renderedResolution = renderedResolution;\n                this.coordinateToVectorPixelTransform_ = compose(this.coordinateToVectorPixelTransform_, width / 2, height / 2, 1 / renderedResolution, -1 / renderedResolution, 0, -viewState.center[0], -viewState.center[1]);\n            }.bind(this));\n            image_1.load();\n        }\n        if (this.image_) {\n            this.renderedPixelToCoordinateTransform_ =\n                frameState.pixelToCoordinateTransform.slice();\n        }\n        return !!this.image_;\n    };\n    /**\n     */\n    CanvasVectorImageLayerRenderer.prototype.preRender = function () { };\n    /**\n     */\n    CanvasVectorImageLayerRenderer.prototype.postRender = function () { };\n    /**\n     */\n    CanvasVectorImageLayerRenderer.prototype.renderDeclutter = function () { };\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {import(\"../vector.js\").FeatureCallback<T>} callback Feature callback.\n     * @param {Array<import(\"../Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    CanvasVectorImageLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, matches) {\n        if (this.vectorRenderer_) {\n            return this.vectorRenderer_.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, matches);\n        }\n        else {\n            return _super.prototype.forEachFeatureAtCoordinate.call(this, coordinate, frameState, hitTolerance, callback, matches);\n        }\n    };\n    return CanvasVectorImageLayerRenderer;\n}(CanvasImageLayerRenderer));\nexport default CanvasVectorImageLayerRenderer;\n//# sourceMappingURL=VectorImageLayer.js.map"]},"metadata":{},"sourceType":"module"}