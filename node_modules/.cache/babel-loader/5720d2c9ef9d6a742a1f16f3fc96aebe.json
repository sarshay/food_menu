{"ast":null,"code":"import 'ol/ol.css';\nimport Feature from 'ol/Feature';\nimport Map from 'ol/Map';\nimport Overlay from 'ol/Overlay';\nimport Point from 'ol/geom/Point';\nimport TileJSON from 'ol/source/TileJSON';\nimport VectorSource from 'ol/source/Vector';\nimport View from 'ol/View';\nimport { Icon, Style, Text } from 'ol/style';\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer';\nimport { fromLonLat } from 'ol/proj';\nimport { getVectorContext } from 'ol/render';\nconst rasterLayer = new TileLayer({\n  source: new TileJSON({\n    url: 'https://a.tiles.mapbox.com/v3/aj.1x1-degrees.json?secure=1',\n    crossOrigin: ''\n  })\n});\nconst iconFeature = new Feature({\n  geometry: new Point(fromLonLat([0, -10])),\n  name: 'Fish.1'\n});\nconst feature1 = new Feature({\n  geometry: new Point(fromLonLat([0, -10])),\n  name: 'Fish.1 Island'\n});\nconst feature2 = new Feature({\n  geometry: new Point(fromLonLat([-30, 10])),\n  name: 'Fish.2 Island'\n});\nconst iconStyle = new Style({\n  image: new Icon({\n    anchor: [0.5, 0.9],\n    src: 'data/fish.png',\n    crossOrigin: '',\n    scale: [0, 0],\n    rotation: Math.PI / 4\n  }),\n  text: new Text({\n    text: 'FISH\\nTEXT',\n    scale: [0, 0],\n    rotation: Math.PI / 4,\n    textAlign: 'center',\n    textBaseline: 'top'\n  })\n});\nlet i = 0;\nlet j = 45;\niconFeature.setStyle(function () {\n  const x = Math.sin(i * Math.PI / 180) * 3;\n  const y = Math.sin(j * Math.PI / 180) * 4;\n  iconStyle.getImage().setScale([x, y]);\n  iconStyle.getText().setScale([x, y]);\n  return iconStyle;\n});\nrasterLayer.on('postrender', function (event) {\n  const vectorContext = getVectorContext(event);\n  const x = Math.cos(i * Math.PI / 180) * 3;\n  const y = Math.cos(j * Math.PI / 180) * 4;\n  iconStyle.getImage().setScale([x, y]);\n  iconStyle.getText().setScale([x, y]);\n  vectorContext.drawFeature(feature2, iconStyle);\n});\nconst vectorSource = new VectorSource({\n  features: [iconFeature, feature1, feature2]\n});\nconst vectorLayer = new VectorLayer({\n  source: vectorSource\n});\nconst map = new Map({\n  layers: [rasterLayer, vectorLayer],\n  target: document.getElementById('map'),\n  view: new View({\n    center: fromLonLat([-15, 0]),\n    zoom: 3\n  })\n});\nsetInterval(function () {\n  i = (i + 4) % 360;\n  j = (j + 5) % 360;\n  vectorSource.changed();\n}, 1000);\nconst element = document.getElementById('popup');\nconst popup = new Overlay({\n  element: element,\n  positioning: 'bottom-center',\n  stopEvent: false\n});\nmap.addOverlay(popup); // display popup on click\n\nmap.on('click', function (evt) {\n  const feature = map.forEachFeatureAtPixel(evt.pixel, function (feature) {\n    return feature;\n  });\n  $(element).popover('dispose');\n\n  if (feature) {\n    popup.setPosition(evt.coordinate);\n    $(element).popover({\n      placement: 'top',\n      html: true,\n      animation: false,\n      content: feature.get('name')\n    });\n    $(element).popover('show');\n  }\n}); // change mouse cursor when over marker\n\nmap.on('pointermove', function (e) {\n  const pixel = map.getEventPixel(e.originalEvent);\n  const hit = map.hasFeatureAtPixel(pixel);\n  map.getTarget().style.cursor = hit ? 'pointer' : '';\n}); // Close the popup when the map is moved\n\nmap.on('movestart', function () {\n  $(element).popover('dispose');\n});","map":{"version":3,"sources":["C:/xampp/htdocs/food_menu/src/map.js"],"names":["Feature","Map","Overlay","Point","TileJSON","VectorSource","View","Icon","Style","Text","Tile","TileLayer","Vector","VectorLayer","fromLonLat","getVectorContext","rasterLayer","source","url","crossOrigin","iconFeature","geometry","name","feature1","feature2","iconStyle","image","anchor","src","scale","rotation","Math","PI","text","textAlign","textBaseline","i","j","setStyle","x","sin","y","getImage","setScale","getText","on","event","vectorContext","cos","drawFeature","vectorSource","features","vectorLayer","map","layers","target","document","getElementById","view","center","zoom","setInterval","changed","element","popup","positioning","stopEvent","addOverlay","evt","feature","forEachFeatureAtPixel","pixel","$","popover","setPosition","coordinate","placement","html","animation","content","get","e","getEventPixel","originalEvent","hit","hasFeatureAtPixel","getTarget","style","cursor"],"mappings":"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","sourcesContent":["import 'ol/ol.css';\r\nimport Feature from 'ol/Feature';\r\nimport Map from 'ol/Map';\r\nimport Overlay from 'ol/Overlay';\r\nimport Point from 'ol/geom/Point';\r\nimport TileJSON from 'ol/source/TileJSON';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport View from 'ol/View';\r\nimport {Icon, Style, Text} from 'ol/style';\r\nimport {Tile as TileLayer, Vector as VectorLayer} from 'ol/layer';\r\nimport {fromLonLat} from 'ol/proj';\r\nimport {getVectorContext} from 'ol/render';\r\n\r\nconst rasterLayer = new TileLayer({\r\n  source: new TileJSON({\r\n    url: 'https://a.tiles.mapbox.com/v3/aj.1x1-degrees.json?secure=1',\r\n    crossOrigin: '',\r\n  }),\r\n});\r\n\r\nconst iconFeature = new Feature({\r\n  geometry: new Point(fromLonLat([0, -10])),\r\n  name: 'Fish.1',\r\n});\r\n\r\nconst feature1 = new Feature({\r\n  geometry: new Point(fromLonLat([0, -10])),\r\n  name: 'Fish.1 Island',\r\n});\r\n\r\nconst feature2 = new Feature({\r\n  geometry: new Point(fromLonLat([-30, 10])),\r\n  name: 'Fish.2 Island',\r\n});\r\n\r\nconst iconStyle = new Style({\r\n  image: new Icon({\r\n    anchor: [0.5, 0.9],\r\n    src: 'data/fish.png',\r\n    crossOrigin: '',\r\n    scale: [0, 0],\r\n    rotation: Math.PI / 4,\r\n  }),\r\n  text: new Text({\r\n    text: 'FISH\\nTEXT',\r\n    scale: [0, 0],\r\n    rotation: Math.PI / 4,\r\n    textAlign: 'center',\r\n    textBaseline: 'top',\r\n  }),\r\n});\r\n\r\nlet i = 0;\r\nlet j = 45;\r\n\r\niconFeature.setStyle(function () {\r\n  const x = Math.sin((i * Math.PI) / 180) * 3;\r\n  const y = Math.sin((j * Math.PI) / 180) * 4;\r\n  iconStyle.getImage().setScale([x, y]);\r\n  iconStyle.getText().setScale([x, y]);\r\n  return iconStyle;\r\n});\r\n\r\nrasterLayer.on('postrender', function (event) {\r\n  const vectorContext = getVectorContext(event);\r\n  const x = Math.cos((i * Math.PI) / 180) * 3;\r\n  const y = Math.cos((j * Math.PI) / 180) * 4;\r\n  iconStyle.getImage().setScale([x, y]);\r\n  iconStyle.getText().setScale([x, y]);\r\n  vectorContext.drawFeature(feature2, iconStyle);\r\n});\r\n\r\nconst vectorSource = new VectorSource({\r\n  features: [iconFeature, feature1, feature2],\r\n});\r\n\r\nconst vectorLayer = new VectorLayer({\r\n  source: vectorSource,\r\n});\r\n\r\nconst map = new Map({\r\n  layers: [rasterLayer, vectorLayer],\r\n  target: document.getElementById('map'),\r\n  view: new View({\r\n    center: fromLonLat([-15, 0]),\r\n    zoom: 3,\r\n  }),\r\n});\r\n\r\nsetInterval(function () {\r\n  i = (i + 4) % 360;\r\n  j = (j + 5) % 360;\r\n  vectorSource.changed();\r\n}, 1000);\r\n\r\nconst element = document.getElementById('popup');\r\n\r\nconst popup = new Overlay({\r\n  element: element,\r\n  positioning: 'bottom-center',\r\n  stopEvent: false,\r\n});\r\nmap.addOverlay(popup);\r\n\r\n// display popup on click\r\nmap.on('click', function (evt) {\r\n  const feature = map.forEachFeatureAtPixel(evt.pixel, function (feature) {\r\n    return feature;\r\n  });\r\n  $(element).popover('dispose');\r\n  if (feature) {\r\n    popup.setPosition(evt.coordinate);\r\n    $(element).popover({\r\n      placement: 'top',\r\n      html: true,\r\n      animation: false,\r\n      content: feature.get('name'),\r\n    });\r\n    $(element).popover('show');\r\n  }\r\n});\r\n\r\n// change mouse cursor when over marker\r\nmap.on('pointermove', function (e) {\r\n  const pixel = map.getEventPixel(e.originalEvent);\r\n  const hit = map.hasFeatureAtPixel(pixel);\r\n  map.getTarget().style.cursor = hit ? 'pointer' : '';\r\n});\r\n// Close the popup when the map is moved\r\nmap.on('movestart', function () {\r\n  $(element).popover('dispose');\r\n});\r\n"]},"metadata":{},"sourceType":"module"}