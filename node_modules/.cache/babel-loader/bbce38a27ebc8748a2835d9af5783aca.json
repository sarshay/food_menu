{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/interaction/MouseWheelZoom\n */\n\n\nimport { always, focus } from '../events/condition.js';\nimport EventType from '../events/EventType.js';\nimport { DEVICE_PIXEL_RATIO, FIREFOX } from '../has.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport { clamp } from '../math.js';\n/**\n * @enum {string}\n */\n\nexport var Mode = {\n  TRACKPAD: 'trackpad',\n  WHEEL: 'wheel'\n};\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~always}.\n * In addition, if there is a `tabindex` attribute on the map element,\n * {@link module:ol/events/condition~focus} will also be applied.\n * @property {number} [maxDelta=1] Maximum mouse wheel delta.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n */\n\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\n\nvar MouseWheelZoom =\n/** @class */\nfunction (_super) {\n  __extends(MouseWheelZoom, _super);\n  /**\n   * @param {Options=} opt_options Options.\n   */\n\n\n  function MouseWheelZoom(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    _this = _super.call(this,\n    /** @type {import(\"./Interaction.js\").InteractionOptions} */\n    options) || this;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.totalDelta_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.lastDelta_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDelta_ = options.maxDelta !== undefined ? options.maxDelta : 1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.duration_ = options.duration !== undefined ? options.duration : 250;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n\n    _this.condition_ = options.condition ? options.condition : always;\n    /**\n     * @private\n     * @type {?import(\"../coordinate.js\").Coordinate}\n     */\n\n    _this.lastAnchor_ = null;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.startTime_ = undefined;\n    /**\n     * @private\n     * @type {?}\n     */\n\n    _this.timeoutId_;\n    /**\n     * @private\n     * @type {Mode|undefined}\n     */\n\n    _this.mode_ = undefined;\n    /**\n     * Trackpad events separated by this delay will be considered separate\n     * interactions.\n     * @type {number}\n     */\n\n    _this.trackpadEventGap_ = 400;\n    /**\n     * @type {?}\n     */\n\n    _this.trackpadTimeoutId_;\n    /**\n     * The number of delta values per zoom level\n     * @private\n     * @type {number}\n     */\n\n    _this.deltaPerZoom_ = 300;\n    return _this;\n  }\n  /**\n   * @private\n   * @param {import(\"../MapBrowserEvent\").default} mapBrowserEvent Event.\n   * @return {boolean} Condition passes.\n   */\n\n\n  MouseWheelZoom.prototype.conditionInternal_ = function (mapBrowserEvent) {\n    var pass = true;\n\n    if (mapBrowserEvent.map.getTargetElement().hasAttribute('tabindex')) {\n      pass = focus(mapBrowserEvent);\n    }\n\n    return pass && this.condition_(mapBrowserEvent);\n  };\n  /**\n   * @private\n   */\n\n\n  MouseWheelZoom.prototype.endInteraction_ = function () {\n    this.trackpadTimeoutId_ = undefined;\n    var view = this.getMap().getView();\n    view.endInteraction(undefined, this.lastDelta_ ? this.lastDelta_ > 0 ? 1 : -1 : 0, this.lastAnchor_);\n  };\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n   * zooms the map.\n   * @override\n   */\n\n\n  MouseWheelZoom.prototype.handleEvent = function (mapBrowserEvent) {\n    if (!this.conditionInternal_(mapBrowserEvent)) {\n      return true;\n    }\n\n    var type = mapBrowserEvent.type;\n\n    if (type !== EventType.WHEEL) {\n      return true;\n    }\n\n    mapBrowserEvent.preventDefault();\n    var map = mapBrowserEvent.map;\n    var wheelEvent =\n    /** @type {WheelEvent} */\n    mapBrowserEvent.originalEvent;\n\n    if (this.useAnchor_) {\n      this.lastAnchor_ = mapBrowserEvent.coordinate;\n    } // Delta normalisation inspired by\n    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n\n\n    var delta;\n\n    if (mapBrowserEvent.type == EventType.WHEEL) {\n      delta = wheelEvent.deltaY;\n\n      if (FIREFOX && wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n        delta /= DEVICE_PIXEL_RATIO;\n      }\n\n      if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n        delta *= 40;\n      }\n    }\n\n    if (delta === 0) {\n      return false;\n    } else {\n      this.lastDelta_ = delta;\n    }\n\n    var now = Date.now();\n\n    if (this.startTime_ === undefined) {\n      this.startTime_ = now;\n    }\n\n    if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n      this.mode_ = Math.abs(delta) < 4 ? Mode.TRACKPAD : Mode.WHEEL;\n    }\n\n    var view = map.getView();\n\n    if (this.mode_ === Mode.TRACKPAD && !view.getConstrainResolution()) {\n      if (this.trackpadTimeoutId_) {\n        clearTimeout(this.trackpadTimeoutId_);\n      } else {\n        if (view.getAnimating()) {\n          view.cancelAnimations();\n        }\n\n        view.beginInteraction();\n      }\n\n      this.trackpadTimeoutId_ = setTimeout(this.endInteraction_.bind(this), this.timeout_);\n      view.adjustZoom(-delta / this.deltaPerZoom_, this.lastAnchor_);\n      this.startTime_ = now;\n      return false;\n    }\n\n    this.totalDelta_ += delta;\n    var timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n    clearTimeout(this.timeoutId_);\n    this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n    return false;\n  };\n  /**\n   * @private\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n\n\n  MouseWheelZoom.prototype.handleWheelZoom_ = function (map) {\n    var view = map.getView();\n\n    if (view.getAnimating()) {\n      view.cancelAnimations();\n    }\n\n    var delta = -clamp(this.totalDelta_, -this.maxDelta_ * this.deltaPerZoom_, this.maxDelta_ * this.deltaPerZoom_) / this.deltaPerZoom_;\n\n    if (view.getConstrainResolution()) {\n      // view has a zoom constraint, zoom by 1\n      delta = delta ? delta > 0 ? 1 : -1 : 0;\n    }\n\n    zoomByDelta(view, delta, this.lastAnchor_, this.duration_);\n    this.mode_ = undefined;\n    this.totalDelta_ = 0;\n    this.lastAnchor_ = null;\n    this.startTime_ = undefined;\n    this.timeoutId_ = undefined;\n  };\n  /**\n   * Enable or disable using the mouse's location as an anchor when zooming\n   * @param {boolean} useAnchor true to zoom to the mouse's location, false\n   * to zoom to the center of the map\n   * @api\n   */\n\n\n  MouseWheelZoom.prototype.setMouseAnchor = function (useAnchor) {\n    this.useAnchor_ = useAnchor;\n\n    if (!useAnchor) {\n      this.lastAnchor_ = null;\n    }\n  };\n\n  return MouseWheelZoom;\n}(Interaction);\n\nexport default MouseWheelZoom;","map":{"version":3,"sources":["../src/interaction/MouseWheelZoom.js"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport { always, focus } from '../events/condition.js';\nimport EventType from '../events/EventType.js';\nimport { DEVICE_PIXEL_RATIO, FIREFOX } from '../has.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport { clamp } from '../math.js';\n/**\n * @enum {string}\n */\nexport var Mode = {\n    TRACKPAD: 'trackpad',\n    WHEEL: 'wheel'\n};\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~always}.\n * In addition, if there is a `tabindex` attribute on the map element,\n * {@link module:ol/events/condition~focus} will also be applied.\n * @property {number} [maxDelta=1] Maximum mouse wheel delta.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nvar MouseWheelZoom = /** @class */ (function (_super) {\n    __extends(MouseWheelZoom, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function MouseWheelZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.totalDelta_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.lastDelta_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = options.maxDelta !== undefined ? options.maxDelta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : always;\n        /**\n         * @private\n         * @type {?import(\"../coordinate.js\").Coordinate}\n         */\n        _this.lastAnchor_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.startTime_ = undefined;\n        /**\n         * @private\n         * @type {?}\n         */\n        _this.timeoutId_;\n        /**\n         * @private\n         * @type {Mode|undefined}\n         */\n        _this.mode_ = undefined;\n        /**\n         * Trackpad events separated by this delay will be considered separate\n         * interactions.\n         * @type {number}\n         */\n        _this.trackpadEventGap_ = 400;\n        /**\n         * @type {?}\n         */\n        _this.trackpadTimeoutId_;\n        /**\n         * The number of delta values per zoom level\n         * @private\n         * @type {number}\n         */\n        _this.deltaPerZoom_ = 300;\n        return _this;\n    }\n    /**\n     * @private\n     * @param {import(\"../MapBrowserEvent\").default} mapBrowserEvent Event.\n     * @return {boolean} Condition passes.\n     */\n    MouseWheelZoom.prototype.conditionInternal_ = function (mapBrowserEvent) {\n        var pass = true;\n        if (mapBrowserEvent.map.getTargetElement().hasAttribute('tabindex')) {\n            pass = focus(mapBrowserEvent);\n        }\n        return pass && this.condition_(mapBrowserEvent);\n    };\n    /**\n     * @private\n     */\n    MouseWheelZoom.prototype.endInteraction_ = function () {\n        this.trackpadTimeoutId_ = undefined;\n        var view = this.getMap().getView();\n        view.endInteraction(undefined, this.lastDelta_ ? (this.lastDelta_ > 0 ? 1 : -1) : 0, this.lastAnchor_);\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n     * zooms the map.\n     * @override\n     */\n    MouseWheelZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!this.conditionInternal_(mapBrowserEvent)) {\n            return true;\n        }\n        var type = mapBrowserEvent.type;\n        if (type !== EventType.WHEEL) {\n            return true;\n        }\n        mapBrowserEvent.preventDefault();\n        var map = mapBrowserEvent.map;\n        var wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n        if (this.useAnchor_) {\n            this.lastAnchor_ = mapBrowserEvent.coordinate;\n        }\n        // Delta normalisation inspired by\n        // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n        var delta;\n        if (mapBrowserEvent.type == EventType.WHEEL) {\n            delta = wheelEvent.deltaY;\n            if (FIREFOX &&\n                wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n                delta /= DEVICE_PIXEL_RATIO;\n            }\n            if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n                delta *= 40;\n            }\n        }\n        if (delta === 0) {\n            return false;\n        }\n        else {\n            this.lastDelta_ = delta;\n        }\n        var now = Date.now();\n        if (this.startTime_ === undefined) {\n            this.startTime_ = now;\n        }\n        if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n            this.mode_ = Math.abs(delta) < 4 ?\n                Mode.TRACKPAD :\n                Mode.WHEEL;\n        }\n        var view = map.getView();\n        if (this.mode_ === Mode.TRACKPAD && !view.getConstrainResolution()) {\n            if (this.trackpadTimeoutId_) {\n                clearTimeout(this.trackpadTimeoutId_);\n            }\n            else {\n                if (view.getAnimating()) {\n                    view.cancelAnimations();\n                }\n                view.beginInteraction();\n            }\n            this.trackpadTimeoutId_ = setTimeout(this.endInteraction_.bind(this), this.timeout_);\n            view.adjustZoom(-delta / this.deltaPerZoom_, this.lastAnchor_);\n            this.startTime_ = now;\n            return false;\n        }\n        this.totalDelta_ += delta;\n        var timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n        clearTimeout(this.timeoutId_);\n        this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n        return false;\n    };\n    /**\n     * @private\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    MouseWheelZoom.prototype.handleWheelZoom_ = function (map) {\n        var view = map.getView();\n        if (view.getAnimating()) {\n            view.cancelAnimations();\n        }\n        var delta = -clamp(this.totalDelta_, -this.maxDelta_ * this.deltaPerZoom_, this.maxDelta_ * this.deltaPerZoom_) / this.deltaPerZoom_;\n        if (view.getConstrainResolution()) {\n            // view has a zoom constraint, zoom by 1\n            delta = delta ? delta > 0 ? 1 : -1 : 0;\n        }\n        zoomByDelta(view, delta, this.lastAnchor_, this.duration_);\n        this.mode_ = undefined;\n        this.totalDelta_ = 0;\n        this.lastAnchor_ = null;\n        this.startTime_ = undefined;\n        this.timeoutId_ = undefined;\n    };\n    /**\n     * Enable or disable using the mouse's location as an anchor when zooming\n     * @param {boolean} useAnchor true to zoom to the mouse's location, false\n     * to zoom to the center of the map\n     * @api\n     */\n    MouseWheelZoom.prototype.setMouseAnchor = function (useAnchor) {\n        this.useAnchor_ = useAnchor;\n        if (!useAnchor) {\n            this.lastAnchor_ = null;\n        }\n    };\n    return MouseWheelZoom;\n}(Interaction));\nexport default MouseWheelZoom;\n//# sourceMappingURL=MouseWheelZoom.js.map"]},"metadata":{},"sourceType":"module"}