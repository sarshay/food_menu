{"ast":null,"code":"import _ol_ from '../index.js';\nimport _ol_ViewHint_ from '../viewhint.js';\nimport _ol_easing_ from '../easing.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_has_ from '../has.js';\nimport _ol_interaction_Interaction_ from '../interaction/interaction.js';\nimport _ol_math_ from '../math.js';\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n *\n * @constructor\n * @extends {ol.interaction.Interaction}\n * @param {olx.interaction.MouseWheelZoomOptions=} opt_options Options.\n * @api\n */\n\nvar _ol_interaction_MouseWheelZoom_ = function (opt_options) {\n  _ol_interaction_Interaction_.call(this, {\n    handleEvent: _ol_interaction_MouseWheelZoom_.handleEvent\n  });\n\n  var options = opt_options || {};\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this.delta_ = 0;\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this.constrainResolution_ = options.constrainResolution || false;\n  /**\n   * @private\n   * @type {?ol.Coordinate}\n   */\n\n  this.lastAnchor_ = null;\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n\n  this.startTime_ = undefined;\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n\n  this.timeoutId_ = undefined;\n  /**\n   * @private\n   * @type {ol.interaction.MouseWheelZoom.Mode_|undefined}\n   */\n\n  this.mode_ = undefined;\n  /**\n   * Trackpad events separated by this delay will be considered separate\n   * interactions.\n   * @type {number}\n   */\n\n  this.trackpadEventGap_ = 400;\n  /**\n   * @type {number|undefined}\n   */\n\n  this.trackpadTimeoutId_ = undefined;\n  /**\n   * The number of delta values per zoom level\n   * @private\n   * @type {number}\n   */\n\n  this.trackpadDeltaPerZoom_ = 300;\n  /**\n   * The zoom factor by which scroll zooming is allowed to exceed the limits.\n   * @private\n   * @type {number}\n   */\n\n  this.trackpadZoomBuffer_ = 1.5;\n};\n\n_ol_.inherits(_ol_interaction_MouseWheelZoom_, _ol_interaction_Interaction_);\n/**\n * Handles the {@link ol.MapBrowserEvent map browser event} (if it was a\n * mousewheel-event) and eventually zooms the map.\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} Allow event propagation.\n * @this {ol.interaction.MouseWheelZoom}\n * @api\n */\n\n\n_ol_interaction_MouseWheelZoom_.handleEvent = function (mapBrowserEvent) {\n  var type = mapBrowserEvent.type;\n\n  if (type !== _ol_events_EventType_.WHEEL && type !== _ol_events_EventType_.MOUSEWHEEL) {\n    return true;\n  }\n\n  mapBrowserEvent.preventDefault();\n  var map = mapBrowserEvent.map;\n  var wheelEvent =\n  /** @type {WheelEvent} */\n  mapBrowserEvent.originalEvent;\n\n  if (this.useAnchor_) {\n    this.lastAnchor_ = mapBrowserEvent.coordinate;\n  } // Delta normalisation inspired by\n  // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n\n\n  var delta;\n\n  if (mapBrowserEvent.type == _ol_events_EventType_.WHEEL) {\n    delta = wheelEvent.deltaY;\n\n    if (_ol_has_.FIREFOX && wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n      delta /= _ol_has_.DEVICE_PIXEL_RATIO;\n    }\n\n    if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      delta *= 40;\n    }\n  } else if (mapBrowserEvent.type == _ol_events_EventType_.MOUSEWHEEL) {\n    delta = -wheelEvent.wheelDeltaY;\n\n    if (_ol_has_.SAFARI) {\n      delta /= 3;\n    }\n  }\n\n  if (delta === 0) {\n    return false;\n  }\n\n  var now = Date.now();\n\n  if (this.startTime_ === undefined) {\n    this.startTime_ = now;\n  }\n\n  if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n    this.mode_ = Math.abs(delta) < 4 ? _ol_interaction_MouseWheelZoom_.Mode_.TRACKPAD : _ol_interaction_MouseWheelZoom_.Mode_.WHEEL;\n  }\n\n  if (this.mode_ === _ol_interaction_MouseWheelZoom_.Mode_.TRACKPAD) {\n    var view = map.getView();\n\n    if (this.trackpadTimeoutId_) {\n      clearTimeout(this.trackpadTimeoutId_);\n    } else {\n      view.setHint(_ol_ViewHint_.INTERACTING, 1);\n    }\n\n    this.trackpadTimeoutId_ = setTimeout(this.decrementInteractingHint_.bind(this), this.trackpadEventGap_);\n    var resolution = view.getResolution() * Math.pow(2, delta / this.trackpadDeltaPerZoom_);\n    var minResolution = view.getMinResolution();\n    var maxResolution = view.getMaxResolution();\n    var rebound = 0;\n\n    if (resolution < minResolution) {\n      resolution = Math.max(resolution, minResolution / this.trackpadZoomBuffer_);\n      rebound = 1;\n    } else if (resolution > maxResolution) {\n      resolution = Math.min(resolution, maxResolution * this.trackpadZoomBuffer_);\n      rebound = -1;\n    }\n\n    if (this.lastAnchor_) {\n      var center = view.calculateCenterZoom(resolution, this.lastAnchor_);\n      view.setCenter(view.constrainCenter(center));\n    }\n\n    view.setResolution(resolution);\n\n    if (rebound === 0 && this.constrainResolution_) {\n      view.animate({\n        resolution: view.constrainResolution(resolution, delta > 0 ? -1 : 1),\n        easing: _ol_easing_.easeOut,\n        anchor: this.lastAnchor_,\n        duration: this.duration_\n      });\n    }\n\n    if (rebound > 0) {\n      view.animate({\n        resolution: minResolution,\n        easing: _ol_easing_.easeOut,\n        anchor: this.lastAnchor_,\n        duration: 500\n      });\n    } else if (rebound < 0) {\n      view.animate({\n        resolution: maxResolution,\n        easing: _ol_easing_.easeOut,\n        anchor: this.lastAnchor_,\n        duration: 500\n      });\n    }\n\n    this.startTime_ = now;\n    return false;\n  }\n\n  this.delta_ += delta;\n  var timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n  clearTimeout(this.timeoutId_);\n  this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n  return false;\n};\n/**\n * @private\n */\n\n\n_ol_interaction_MouseWheelZoom_.prototype.decrementInteractingHint_ = function () {\n  this.trackpadTimeoutId_ = undefined;\n  var view = this.getMap().getView();\n  view.setHint(_ol_ViewHint_.INTERACTING, -1);\n};\n/**\n * @private\n * @param {ol.PluggableMap} map Map.\n */\n\n\n_ol_interaction_MouseWheelZoom_.prototype.handleWheelZoom_ = function (map) {\n  var view = map.getView();\n\n  if (view.getAnimating()) {\n    view.cancelAnimations();\n  }\n\n  var maxDelta = _ol_.MOUSEWHEELZOOM_MAXDELTA;\n\n  var delta = _ol_math_.clamp(this.delta_, -maxDelta, maxDelta);\n\n  _ol_interaction_Interaction_.zoomByDelta(view, -delta, this.lastAnchor_, this.duration_);\n\n  this.mode_ = undefined;\n  this.delta_ = 0;\n  this.lastAnchor_ = null;\n  this.startTime_ = undefined;\n  this.timeoutId_ = undefined;\n};\n/**\n * Enable or disable using the mouse's location as an anchor when zooming\n * @param {boolean} useAnchor true to zoom to the mouse's location, false\n * to zoom to the center of the map\n * @api\n */\n\n\n_ol_interaction_MouseWheelZoom_.prototype.setMouseAnchor = function (useAnchor) {\n  this.useAnchor_ = useAnchor;\n\n  if (!useAnchor) {\n    this.lastAnchor_ = null;\n  }\n};\n/**\n * @enum {string}\n * @private\n */\n\n\n_ol_interaction_MouseWheelZoom_.Mode_ = {\n  TRACKPAD: 'trackpad',\n  WHEEL: 'wheel'\n};\nexport default _ol_interaction_MouseWheelZoom_;","map":{"version":3,"sources":["C:/xampp/htdocs/food_menu/node_modules/ol/interaction/mousewheelzoom.js"],"names":["_ol_","_ol_ViewHint_","_ol_easing_","_ol_events_EventType_","_ol_has_","_ol_interaction_Interaction_","_ol_math_","_ol_interaction_MouseWheelZoom_","opt_options","call","handleEvent","options","delta_","duration_","duration","undefined","timeout_","timeout","useAnchor_","useAnchor","constrainResolution_","constrainResolution","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","trackpadDeltaPerZoom_","trackpadZoomBuffer_","inherits","mapBrowserEvent","type","WHEEL","MOUSEWHEEL","preventDefault","map","wheelEvent","originalEvent","coordinate","delta","deltaY","FIREFOX","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DEVICE_PIXEL_RATIO","DOM_DELTA_LINE","wheelDeltaY","SAFARI","now","Date","Math","abs","Mode_","TRACKPAD","view","getView","clearTimeout","setHint","INTERACTING","setTimeout","decrementInteractingHint_","bind","resolution","getResolution","pow","minResolution","getMinResolution","maxResolution","getMaxResolution","rebound","max","min","center","calculateCenterZoom","setCenter","constrainCenter","setResolution","animate","easing","easeOut","anchor","timeLeft","handleWheelZoom_","prototype","getMap","getAnimating","cancelAnimations","maxDelta","MOUSEWHEELZOOM_MAXDELTA","clamp","zoomByDelta","setMouseAnchor"],"mappings":"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","sourcesContent":["import _ol_ from '../index.js';\nimport _ol_ViewHint_ from '../viewhint.js';\nimport _ol_easing_ from '../easing.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_has_ from '../has.js';\nimport _ol_interaction_Interaction_ from '../interaction/interaction.js';\nimport _ol_math_ from '../math.js';\n\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n *\n * @constructor\n * @extends {ol.interaction.Interaction}\n * @param {olx.interaction.MouseWheelZoomOptions=} opt_options Options.\n * @api\n */\nvar _ol_interaction_MouseWheelZoom_ = function(opt_options) {\n\n  _ol_interaction_Interaction_.call(this, {\n    handleEvent: _ol_interaction_MouseWheelZoom_.handleEvent\n  });\n\n  var options = opt_options || {};\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.delta_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.constrainResolution_ = options.constrainResolution || false;\n\n  /**\n   * @private\n   * @type {?ol.Coordinate}\n   */\n  this.lastAnchor_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.startTime_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.timeoutId_ = undefined;\n\n  /**\n   * @private\n   * @type {ol.interaction.MouseWheelZoom.Mode_|undefined}\n   */\n  this.mode_ = undefined;\n\n  /**\n   * Trackpad events separated by this delay will be considered separate\n   * interactions.\n   * @type {number}\n   */\n  this.trackpadEventGap_ = 400;\n\n  /**\n   * @type {number|undefined}\n   */\n  this.trackpadTimeoutId_ = undefined;\n\n  /**\n   * The number of delta values per zoom level\n   * @private\n   * @type {number}\n   */\n  this.trackpadDeltaPerZoom_ = 300;\n\n  /**\n   * The zoom factor by which scroll zooming is allowed to exceed the limits.\n   * @private\n   * @type {number}\n   */\n  this.trackpadZoomBuffer_ = 1.5;\n\n};\n\n_ol_.inherits(_ol_interaction_MouseWheelZoom_, _ol_interaction_Interaction_);\n\n\n/**\n * Handles the {@link ol.MapBrowserEvent map browser event} (if it was a\n * mousewheel-event) and eventually zooms the map.\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} Allow event propagation.\n * @this {ol.interaction.MouseWheelZoom}\n * @api\n */\n_ol_interaction_MouseWheelZoom_.handleEvent = function(mapBrowserEvent) {\n  var type = mapBrowserEvent.type;\n  if (type !== _ol_events_EventType_.WHEEL && type !== _ol_events_EventType_.MOUSEWHEEL) {\n    return true;\n  }\n\n  mapBrowserEvent.preventDefault();\n\n  var map = mapBrowserEvent.map;\n  var wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n\n  if (this.useAnchor_) {\n    this.lastAnchor_ = mapBrowserEvent.coordinate;\n  }\n\n  // Delta normalisation inspired by\n  // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n  var delta;\n  if (mapBrowserEvent.type == _ol_events_EventType_.WHEEL) {\n    delta = wheelEvent.deltaY;\n    if (_ol_has_.FIREFOX &&\n        wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n      delta /= _ol_has_.DEVICE_PIXEL_RATIO;\n    }\n    if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      delta *= 40;\n    }\n  } else if (mapBrowserEvent.type == _ol_events_EventType_.MOUSEWHEEL) {\n    delta = -wheelEvent.wheelDeltaY;\n    if (_ol_has_.SAFARI) {\n      delta /= 3;\n    }\n  }\n\n  if (delta === 0) {\n    return false;\n  }\n\n  var now = Date.now();\n\n  if (this.startTime_ === undefined) {\n    this.startTime_ = now;\n  }\n\n  if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n    this.mode_ = Math.abs(delta) < 4 ?\n      _ol_interaction_MouseWheelZoom_.Mode_.TRACKPAD :\n      _ol_interaction_MouseWheelZoom_.Mode_.WHEEL;\n  }\n\n  if (this.mode_ === _ol_interaction_MouseWheelZoom_.Mode_.TRACKPAD) {\n    var view = map.getView();\n    if (this.trackpadTimeoutId_) {\n      clearTimeout(this.trackpadTimeoutId_);\n    } else {\n      view.setHint(_ol_ViewHint_.INTERACTING, 1);\n    }\n    this.trackpadTimeoutId_ = setTimeout(this.decrementInteractingHint_.bind(this), this.trackpadEventGap_);\n    var resolution = view.getResolution() * Math.pow(2, delta / this.trackpadDeltaPerZoom_);\n    var minResolution = view.getMinResolution();\n    var maxResolution = view.getMaxResolution();\n    var rebound = 0;\n    if (resolution < minResolution) {\n      resolution = Math.max(resolution, minResolution / this.trackpadZoomBuffer_);\n      rebound = 1;\n    } else if (resolution > maxResolution) {\n      resolution = Math.min(resolution, maxResolution * this.trackpadZoomBuffer_);\n      rebound = -1;\n    }\n    if (this.lastAnchor_) {\n      var center = view.calculateCenterZoom(resolution, this.lastAnchor_);\n      view.setCenter(view.constrainCenter(center));\n    }\n    view.setResolution(resolution);\n\n    if (rebound === 0 && this.constrainResolution_) {\n      view.animate({\n        resolution: view.constrainResolution(resolution, delta > 0 ? -1 : 1),\n        easing: _ol_easing_.easeOut,\n        anchor: this.lastAnchor_,\n        duration: this.duration_\n      });\n    }\n\n    if (rebound > 0) {\n      view.animate({\n        resolution: minResolution,\n        easing: _ol_easing_.easeOut,\n        anchor: this.lastAnchor_,\n        duration: 500\n      });\n    } else if (rebound < 0) {\n      view.animate({\n        resolution: maxResolution,\n        easing: _ol_easing_.easeOut,\n        anchor: this.lastAnchor_,\n        duration: 500\n      });\n    }\n    this.startTime_ = now;\n    return false;\n  }\n\n  this.delta_ += delta;\n\n  var timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n\n  clearTimeout(this.timeoutId_);\n  this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n\n  return false;\n};\n\n\n/**\n * @private\n */\n_ol_interaction_MouseWheelZoom_.prototype.decrementInteractingHint_ = function() {\n  this.trackpadTimeoutId_ = undefined;\n  var view = this.getMap().getView();\n  view.setHint(_ol_ViewHint_.INTERACTING, -1);\n};\n\n\n/**\n * @private\n * @param {ol.PluggableMap} map Map.\n */\n_ol_interaction_MouseWheelZoom_.prototype.handleWheelZoom_ = function(map) {\n  var view = map.getView();\n  if (view.getAnimating()) {\n    view.cancelAnimations();\n  }\n  var maxDelta = _ol_.MOUSEWHEELZOOM_MAXDELTA;\n  var delta = _ol_math_.clamp(this.delta_, -maxDelta, maxDelta);\n  _ol_interaction_Interaction_.zoomByDelta(view, -delta, this.lastAnchor_,\n      this.duration_);\n  this.mode_ = undefined;\n  this.delta_ = 0;\n  this.lastAnchor_ = null;\n  this.startTime_ = undefined;\n  this.timeoutId_ = undefined;\n};\n\n\n/**\n * Enable or disable using the mouse's location as an anchor when zooming\n * @param {boolean} useAnchor true to zoom to the mouse's location, false\n * to zoom to the center of the map\n * @api\n */\n_ol_interaction_MouseWheelZoom_.prototype.setMouseAnchor = function(useAnchor) {\n  this.useAnchor_ = useAnchor;\n  if (!useAnchor) {\n    this.lastAnchor_ = null;\n  }\n};\n\n\n/**\n * @enum {string}\n * @private\n */\n_ol_interaction_MouseWheelZoom_.Mode_ = {\n  TRACKPAD: 'trackpad',\n  WHEEL: 'wheel'\n};\nexport default _ol_interaction_MouseWheelZoom_;\n"]},"metadata":{},"sourceType":"module"}