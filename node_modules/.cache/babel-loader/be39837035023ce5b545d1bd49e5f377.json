{"ast":null,"code":"import _ol_ from '../../index.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_functions_ from '../../functions.js';\nimport _ol_render_Event_ from '../../render/event.js';\nimport _ol_render_EventType_ from '../../render/eventtype.js';\nimport _ol_render_canvas_ from '../../render/canvas.js';\nimport _ol_render_canvas_Immediate_ from '../../render/canvas/immediate.js';\nimport _ol_renderer_Layer_ from '../layer.js';\nimport _ol_transform_ from '../../transform.js';\n/**\n * @constructor\n * @abstract\n * @extends {ol.renderer.Layer}\n * @param {ol.layer.Layer} layer Layer.\n */\n\nvar _ol_renderer_canvas_Layer_ = function (layer) {\n  _ol_renderer_Layer_.call(this, layer);\n  /**\n   * @protected\n   * @type {number}\n   */\n\n\n  this.renderedResolution;\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n\n  this.transform_ = _ol_transform_.create();\n};\n\n_ol_.inherits(_ol_renderer_canvas_Layer_, _ol_renderer_Layer_);\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Extent} extent Clip extent.\n * @protected\n */\n\n\n_ol_renderer_canvas_Layer_.prototype.clip = function (context, frameState, extent) {\n  var pixelRatio = frameState.pixelRatio;\n  var width = frameState.size[0] * pixelRatio;\n  var height = frameState.size[1] * pixelRatio;\n  var rotation = frameState.viewState.rotation;\n\n  var topLeft = _ol_extent_.getTopLeft(\n  /** @type {ol.Extent} */\n  extent);\n\n  var topRight = _ol_extent_.getTopRight(\n  /** @type {ol.Extent} */\n  extent);\n\n  var bottomRight = _ol_extent_.getBottomRight(\n  /** @type {ol.Extent} */\n  extent);\n\n  var bottomLeft = _ol_extent_.getBottomLeft(\n  /** @type {ol.Extent} */\n  extent);\n\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, topLeft);\n\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, topRight);\n\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, bottomRight);\n\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, bottomLeft);\n\n  context.save();\n\n  _ol_render_canvas_.rotateAtOffset(context, -rotation, width / 2, height / 2);\n\n  context.beginPath();\n  context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n  context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n  context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n  context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n  context.clip();\n\n  _ol_render_canvas_.rotateAtOffset(context, rotation, width / 2, height / 2);\n};\n/**\n * @param {ol.render.EventType} type Event type.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Transform=} opt_transform Transform.\n * @private\n */\n\n\n_ol_renderer_canvas_Layer_.prototype.dispatchComposeEvent_ = function (type, context, frameState, opt_transform) {\n  var layer = this.getLayer();\n\n  if (layer.hasListener(type)) {\n    var width = frameState.size[0] * frameState.pixelRatio;\n    var height = frameState.size[1] * frameState.pixelRatio;\n    var rotation = frameState.viewState.rotation;\n\n    _ol_render_canvas_.rotateAtOffset(context, -rotation, width / 2, height / 2);\n\n    var transform = opt_transform !== undefined ? opt_transform : this.getTransform(frameState, 0);\n    var render = new _ol_render_canvas_Immediate_(context, frameState.pixelRatio, frameState.extent, transform, frameState.viewState.rotation);\n    var composeEvent = new _ol_render_Event_(type, render, frameState, context, null);\n    layer.dispatchEvent(composeEvent);\n\n    _ol_render_canvas_.rotateAtOffset(context, rotation, width / 2, height / 2);\n  }\n};\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {olx.FrameState} frameState FrameState.\n * @param {function(this: S, ol.layer.Layer, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n *     callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @return {T|undefined} Callback result.\n * @template S,T,U\n */\n\n\n_ol_renderer_canvas_Layer_.prototype.forEachLayerAtCoordinate = function (coordinate, frameState, callback, thisArg) {\n  var hasFeature = this.forEachFeatureAtCoordinate(coordinate, frameState, 0, _ol_functions_.TRUE, this);\n\n  if (hasFeature) {\n    return callback.call(thisArg, this.getLayer(), null);\n  } else {\n    return undefined;\n  }\n};\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @param {ol.Transform=} opt_transform Transform.\n * @protected\n */\n\n\n_ol_renderer_canvas_Layer_.prototype.postCompose = function (context, frameState, layerState, opt_transform) {\n  this.dispatchComposeEvent_(_ol_render_EventType_.POSTCOMPOSE, context, frameState, opt_transform);\n};\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Transform=} opt_transform Transform.\n * @protected\n */\n\n\n_ol_renderer_canvas_Layer_.prototype.preCompose = function (context, frameState, opt_transform) {\n  this.dispatchComposeEvent_(_ol_render_EventType_.PRECOMPOSE, context, frameState, opt_transform);\n};\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Transform=} opt_transform Transform.\n * @protected\n */\n\n\n_ol_renderer_canvas_Layer_.prototype.dispatchRenderEvent = function (context, frameState, opt_transform) {\n  this.dispatchComposeEvent_(_ol_render_EventType_.RENDER, context, frameState, opt_transform);\n};\n/**\n * @param {olx.FrameState} frameState Frame state.\n * @param {number} offsetX Offset on the x-axis in view coordinates.\n * @protected\n * @return {!ol.Transform} Transform.\n */\n\n\n_ol_renderer_canvas_Layer_.prototype.getTransform = function (frameState, offsetX) {\n  var viewState = frameState.viewState;\n  var pixelRatio = frameState.pixelRatio;\n  var dx1 = pixelRatio * frameState.size[0] / 2;\n  var dy1 = pixelRatio * frameState.size[1] / 2;\n  var sx = pixelRatio / viewState.resolution;\n  var sy = -sx;\n  var angle = -viewState.rotation;\n  var dx2 = -viewState.center[0] + offsetX;\n  var dy2 = -viewState.center[1];\n  return _ol_transform_.compose(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n};\n/**\n * @abstract\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @param {CanvasRenderingContext2D} context Context.\n */\n\n\n_ol_renderer_canvas_Layer_.prototype.composeFrame = function (frameState, layerState, context) {};\n/**\n * @abstract\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @return {boolean} whether composeFrame should be called.\n */\n\n\n_ol_renderer_canvas_Layer_.prototype.prepareFrame = function (frameState, layerState) {};\n\nexport default _ol_renderer_canvas_Layer_;","map":{"version":3,"sources":["C:/xampp/htdocs/food_menu/node_modules/ol/renderer/canvas/layer.js"],"names":["_ol_","_ol_extent_","_ol_functions_","_ol_render_Event_","_ol_render_EventType_","_ol_render_canvas_","_ol_render_canvas_Immediate_","_ol_renderer_Layer_","_ol_transform_","_ol_renderer_canvas_Layer_","layer","call","renderedResolution","transform_","create","inherits","prototype","clip","context","frameState","extent","pixelRatio","width","size","height","rotation","viewState","topLeft","getTopLeft","topRight","getTopRight","bottomRight","getBottomRight","bottomLeft","getBottomLeft","apply","coordinateToPixelTransform","save","rotateAtOffset","beginPath","moveTo","lineTo","dispatchComposeEvent_","type","opt_transform","getLayer","hasListener","transform","undefined","getTransform","render","composeEvent","dispatchEvent","forEachLayerAtCoordinate","coordinate","callback","thisArg","hasFeature","forEachFeatureAtCoordinate","TRUE","postCompose","layerState","POSTCOMPOSE","preCompose","PRECOMPOSE","dispatchRenderEvent","RENDER","offsetX","dx1","dy1","sx","resolution","sy","angle","dx2","center","dy2","compose","composeFrame","prepareFrame"],"mappings":"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","sourcesContent":["import _ol_ from '../../index.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_functions_ from '../../functions.js';\nimport _ol_render_Event_ from '../../render/event.js';\nimport _ol_render_EventType_ from '../../render/eventtype.js';\nimport _ol_render_canvas_ from '../../render/canvas.js';\nimport _ol_render_canvas_Immediate_ from '../../render/canvas/immediate.js';\nimport _ol_renderer_Layer_ from '../layer.js';\nimport _ol_transform_ from '../../transform.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {ol.renderer.Layer}\n * @param {ol.layer.Layer} layer Layer.\n */\nvar _ol_renderer_canvas_Layer_ = function(layer) {\n\n  _ol_renderer_Layer_.call(this, layer);\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.renderedResolution;\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.transform_ = _ol_transform_.create();\n\n};\n\n_ol_.inherits(_ol_renderer_canvas_Layer_, _ol_renderer_Layer_);\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Extent} extent Clip extent.\n * @protected\n */\n_ol_renderer_canvas_Layer_.prototype.clip = function(context, frameState, extent) {\n  var pixelRatio = frameState.pixelRatio;\n  var width = frameState.size[0] * pixelRatio;\n  var height = frameState.size[1] * pixelRatio;\n  var rotation = frameState.viewState.rotation;\n  var topLeft = _ol_extent_.getTopLeft(/** @type {ol.Extent} */ (extent));\n  var topRight = _ol_extent_.getTopRight(/** @type {ol.Extent} */ (extent));\n  var bottomRight = _ol_extent_.getBottomRight(/** @type {ol.Extent} */ (extent));\n  var bottomLeft = _ol_extent_.getBottomLeft(/** @type {ol.Extent} */ (extent));\n\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, topLeft);\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, topRight);\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, bottomRight);\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, bottomLeft);\n\n  context.save();\n  _ol_render_canvas_.rotateAtOffset(context, -rotation, width / 2, height / 2);\n  context.beginPath();\n  context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n  context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n  context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n  context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n  context.clip();\n  _ol_render_canvas_.rotateAtOffset(context, rotation, width / 2, height / 2);\n};\n\n\n/**\n * @param {ol.render.EventType} type Event type.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Transform=} opt_transform Transform.\n * @private\n */\n_ol_renderer_canvas_Layer_.prototype.dispatchComposeEvent_ = function(type, context, frameState, opt_transform) {\n  var layer = this.getLayer();\n  if (layer.hasListener(type)) {\n    var width = frameState.size[0] * frameState.pixelRatio;\n    var height = frameState.size[1] * frameState.pixelRatio;\n    var rotation = frameState.viewState.rotation;\n    _ol_render_canvas_.rotateAtOffset(context, -rotation, width / 2, height / 2);\n    var transform = opt_transform !== undefined ?\n      opt_transform : this.getTransform(frameState, 0);\n    var render = new _ol_render_canvas_Immediate_(\n        context, frameState.pixelRatio, frameState.extent, transform,\n        frameState.viewState.rotation);\n    var composeEvent = new _ol_render_Event_(type, render, frameState,\n        context, null);\n    layer.dispatchEvent(composeEvent);\n    _ol_render_canvas_.rotateAtOffset(context, rotation, width / 2, height / 2);\n  }\n};\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {olx.FrameState} frameState FrameState.\n * @param {function(this: S, ol.layer.Layer, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n *     callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @return {T|undefined} Callback result.\n * @template S,T,U\n */\n_ol_renderer_canvas_Layer_.prototype.forEachLayerAtCoordinate = function(coordinate, frameState, callback, thisArg) {\n  var hasFeature = this.forEachFeatureAtCoordinate(\n      coordinate, frameState, 0, _ol_functions_.TRUE, this);\n\n  if (hasFeature) {\n    return callback.call(thisArg, this.getLayer(), null);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @param {ol.Transform=} opt_transform Transform.\n * @protected\n */\n_ol_renderer_canvas_Layer_.prototype.postCompose = function(context, frameState, layerState, opt_transform) {\n  this.dispatchComposeEvent_(_ol_render_EventType_.POSTCOMPOSE, context,\n      frameState, opt_transform);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Transform=} opt_transform Transform.\n * @protected\n */\n_ol_renderer_canvas_Layer_.prototype.preCompose = function(context, frameState, opt_transform) {\n  this.dispatchComposeEvent_(_ol_render_EventType_.PRECOMPOSE, context,\n      frameState, opt_transform);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Transform=} opt_transform Transform.\n * @protected\n */\n_ol_renderer_canvas_Layer_.prototype.dispatchRenderEvent = function(context, frameState, opt_transform) {\n  this.dispatchComposeEvent_(_ol_render_EventType_.RENDER, context,\n      frameState, opt_transform);\n};\n\n\n/**\n * @param {olx.FrameState} frameState Frame state.\n * @param {number} offsetX Offset on the x-axis in view coordinates.\n * @protected\n * @return {!ol.Transform} Transform.\n */\n_ol_renderer_canvas_Layer_.prototype.getTransform = function(frameState, offsetX) {\n  var viewState = frameState.viewState;\n  var pixelRatio = frameState.pixelRatio;\n  var dx1 = pixelRatio * frameState.size[0] / 2;\n  var dy1 = pixelRatio * frameState.size[1] / 2;\n  var sx = pixelRatio / viewState.resolution;\n  var sy = -sx;\n  var angle = -viewState.rotation;\n  var dx2 = -viewState.center[0] + offsetX;\n  var dy2 = -viewState.center[1];\n  return _ol_transform_.compose(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n};\n\n\n/**\n * @abstract\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @param {CanvasRenderingContext2D} context Context.\n */\n_ol_renderer_canvas_Layer_.prototype.composeFrame = function(frameState, layerState, context) {};\n\n/**\n * @abstract\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @return {boolean} whether composeFrame should be called.\n */\n_ol_renderer_canvas_Layer_.prototype.prepareFrame = function(frameState, layerState) {};\nexport default _ol_renderer_canvas_Layer_;\n"]},"metadata":{},"sourceType":"module"}